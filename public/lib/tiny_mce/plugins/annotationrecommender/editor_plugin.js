(function(){tinymce.PluginManager.requireLangPack('annotationrecommender');tinymce.create('tinymce.plugins.AnnotationRecommenderPlugin',{controllerUri:'ars/recommender',init:function(editor,url){tinymce.DOM.loadCSS(url+"/css/annotationrecommender.css");editor.addButton('ars_recommend',{image:url+'/img/button.gif',scope:this,title:'annotationrecommender.button_title',onclick:function(){new Ajax.Request(this.controllerUri,{asynchronous:false,parameters:{text:editor.getContent()},onSuccess:function(transport){jsonData=transport.responseJSON;for(var i=0;i<jsonData.annotations.length;i++){jsonData.annotations[i].annotation.begin*=1;jsonData.annotations[i].annotation.end*=1}editor.windowManager.open({file:url+'/select.html',inline:1,height:Math.floor(document.viewport.getHeight()*0.8),width:Math.floor(document.viewport.getWidth()*0.8)},{editor:editor,jsonData:jsonData,originWindow:window,plugin_url:url})}})}})},createControl:function(name,cm){return null},getInfo:function(){return{longname:'Annotation Recommender Plugin',author:'Patrick Jungermann',authorurl:'',infourl:'',version:'0.1'}}});tinymce.PluginManager.add('annotationrecommender',tinymce.plugins.AnnotationRecommenderPlugin)})();